syntax = "proto3";
package online_clients;
import "google/protobuf/empty.proto";


message OnlineClientGrpcModel{
    string TenantId = 1;
    string InventoryId = 2;
    string SessionId = 3;
    string Ip = 4;
    string Country = 5;
    string Server = 6;
    string Origin = 7;
    string Path = 8;
    string TimeZone = 9;
    int64 Connected = 10;
    string UserAgent = 11;
    
}

message DisconnectGrpcModel{
    string Server = 1;
    string SessionId = 2;
}


message ConnectDisconnectGrpcRequest{
    optional OnlineClientGrpcModel Connect = 1;
    optional DisconnectGrpcModel Disconnect = 2;
}

message NoClientsGrpcRequest{
    string Server = 1;
}

message KeyValueGrpcModel{
    string Key = 1;
    uint32 Value = 2;
}

message GetStatisticsGrpcResponse{
    repeated KeyValueGrpcModel ByCountry =1;
    repeated KeyValueGrpcModel ByPlatform =2;
    
}

service OnlineClients {
    rpc UpdateSnapshot(stream OnlineClientGrpcModel) returns (google.protobuf.Empty);
    rpc NoClients(NoClientsGrpcRequest) returns (google.protobuf.Empty);
    rpc ConnectDisconnect(stream ConnectDisconnectGrpcRequest) returns (google.protobuf.Empty);
    rpc Get(google.protobuf.Empty) returns (stream OnlineClientGrpcModel);
    rpc GetStatistics(google.protobuf.Empty) returns (GetStatisticsGrpcResponse);
    rpc Ping(google.protobuf.Empty) returns (google.protobuf.Empty);
}
